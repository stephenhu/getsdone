worker_processes 1;

events {
  worker_connections        1024;
}

http {

  include           mime.types;
  default_type      application/octet-stream;

  server {

    listen          80;
    server_name     getsdone.io;

    location / {
      proxy_pass          https://getsdone.io;
      proxy_set_header    Host $host;
    }

  }

  server {

    listen                443;
    ssl                   on;
    ssl_certificate       <%= nginx_dir %>/conf/getsdone.crt;
    ssl_certificate_key   <%= nginx_dir %>/conf/getsdone.key;
    keepalive_timeout     70;
    server_name           getsdone.io;
    root                  <%= root_dir %>;
    error_log             <%= root_dir %>/logs/error.log;
    access_log            <%= root_dir %>/logs/access.log;

    location / {
      proxy_pass          http://getsdone.io:8000;
      proxy_set_header    Host $host;
      proxy_set_header    X-Forwarded-Proto $scheme;
    }

  }

}

